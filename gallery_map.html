<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Interactive Gallery Map</title>
  <link href="https://cdn.jsdelivr.net/npm/jvectormap@2.0.4/jquery-jvectormap.css" rel="stylesheet" />
  <link rel="stylesheet" href="css/gallerymapstyle.css">
</head>
<body>
  <div id="map"></div>

  <!-- Modal -->
  <div id="noGalleryModal" style="display:none;">
    <div class="modal-content">
      <p>Whoops! No gallery for this country yet.</p>
      <button id="closeModalBtn" type="button">Close</button>
    </div>
  </div>

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jvectormap@2.0.4/jquery-jvectormap.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jvectormap@2.0.4/tests/assets/jquery-jvectormap-world-mill-en.js"></script>

  <script>
    $(function() {
      const oceanColor = '#001f3f'; // dark navy
      const countryDefault = '#555555'; // dark grey
      const highlightColor = '#FFD700'; // light gold

      // Country codes mapped to gallery HTML files
      const highlightedCountries = {
        US: 'united_states_gallery.html',
        AR: 'argentina_gallery.html',
        CH: 'switzerland_gallery.html',
        DE: 'germany_gallery.html',
        FR: 'france_gallery.html',
        GB: 'united_kingdom_gallery.html',
        CR: 'costa_rica_gallery.html',
        SI: 'slovenia_gallery.html',
        AT: 'austria_gallery.html',
        AU: 'australia_gallery.html'
      };

      // Prepare fill colors for highlighted countries
      const highlightValues = {};
      for (const code in highlightedCountries) {
        highlightValues[code] = highlightColor;
      }

      const mapObject = $('#map').vectorMap({
        map: 'world_mill_en',
        backgroundColor: oceanColor,
        regionStyle: {
          initial: {
            fill: countryDefault,
            "fill-opacity": 1,
            stroke: 'none',
            "stroke-width": 0,
            "stroke-opacity": 0
          },
          hover: {
            fill: '#ffcc00',
            "fill-opacity": 0.8,
            cursor: 'pointer'
          },
          selected: {
            fill: highlightColor
          }
        },
        series: {
          regions: [{
            values: highlightValues,
            attribute: 'fill'
          }]
        },
        onRegionClick: function(event, code) {
          if (highlightedCountries.hasOwnProperty(code)) {
            window.location.href = highlightedCountries[code];
          } else {
            $('#noGalleryModal').fadeIn(200);
          }
        }
      });

      // Close modal on button click
      $('#closeModalBtn').on('click', function() {
        $('#noGalleryModal').fadeOut(200);
      });

      // Close modal on Escape key press
      $(document).on('keydown', function(e) {
        if (e.key === "Escape" || e.key === "Esc") {
          $('#noGalleryModal').fadeOut(200);
        }
      });
    });
  </script>
</body>
</html>
